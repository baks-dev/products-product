let $addButtonPhoto=document.getElementById("photo_addCollection");let $blockCollectionPhoto=document.getElementById("photo_collection");if($addButtonPhoto){let $delItemPhoto=$blockCollectionPhoto.querySelectorAll(".del-item-photo");$delItemPhoto.forEach((function(item){item.addEventListener("click",(function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;if($counter>1){item.closest(".item-collection-photo").remove()}let isRoot=false;$blockCollectionPhoto.querySelectorAll(".change-root").forEach((function(rootCheck){if(rootCheck.checked===true){isRoot=true}}));if(isRoot===false){photo_collection.querySelectorAll(".change-root").forEach((function(rootCheck,i){if(i===0){rootCheck.checked=true;return true}}))}}))}));let $changeItemPhoto=$blockCollectionPhoto.querySelectorAll(".change-root");$changeItemPhoto.forEach((function(item){if($changeItemPhoto.length===1&&item.checked===false){item.checked=true}item.addEventListener("change",(function(){let photo_collection=document.getElementById("photo_collection");photo_collection.querySelectorAll(".change-root").forEach((function(rootCheck){rootCheck.checked=false}));this.checked=true}))}));$addButtonPhoto.addEventListener("click",(function(){let $addButtonPhoto=this;let newForm=document.getElementById($addButtonPhoto.dataset.prototype).dataset.prototype;let index=$addButtonPhoto.dataset.index*1;const item_collections=document.getElementsByClassName("item-collection-photo");const total_count=item_collections.length;if(total_count===12){return}newForm=newForm.replace(/__photos__/g,index);let div=document.createElement("div");div.classList.add("item-collection-photo");div.innerHTML=newForm;$blockCollectionPhoto.append(div);div.querySelector(".del-item-photo").addEventListener("click",(function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;this.closest(".item-collection-photo").remove();let index=$addButtonPhoto.dataset.index*1;$addButtonPhoto.dataset.index=(index-1).toString()}));div.querySelector(".change-root").addEventListener("change",(function(selector){let photo_collection=document.getElementById("photo_collection");photo_collection.querySelectorAll(".change-root").forEach((function(rootChack,i,arr){rootChack.checked=false}));this.checked=true}));$addButtonPhoto.dataset.index=(index+1).toString();let inputElement=div.querySelector('input[type="file"]');inputElement.addEventListener("change",(function(e){var file=inputElement.files[0];var reader=new FileReader;let image=div.querySelector(".image-input");reader.onloadend=function(){image.style.setProperty("background-image","url("+reader.result+")","important")};if(file){reader.readAsDataURL(file)}else{image.style.setProperty("background-image","url(/img/blank.svg)","important")}}))}));["dragenter","dragover","dragleave","drop"].forEach((event=>{$blockCollectionPhoto.addEventListener(event,(function(e){e.preventDefault();e.stopPropagation()}),false)}));["dragenter","dragover"].forEach((event=>{$blockCollectionPhoto.addEventListener(event,(()=>{$blockCollectionPhoto.classList.add("shadow")}),false)}));["dragleave","drop"].forEach((event=>{$blockCollectionPhoto.addEventListener(event,(()=>{$blockCollectionPhoto.classList.remove("shadow")}),false)}));$blockCollectionPhoto.addEventListener("drop",(function(e){const dt=e.dataTransfer;const files=dt.files;[...files].forEach(previewAndAttachFile)}));function previewAndAttachFile(file){if(!file.type.startsWith("image/")){return}const reader=new FileReader;reader.readAsDataURL(file);reader.onloadend=function(){const item_collection_photo=document.createElement("div");item_collection_photo.classList.add("item-collection-photo");let newPrototype=document.getElementById($addButtonPhoto.dataset.prototype).dataset.prototype;let index=$addButtonPhoto.dataset.index*1;const item_collections=document.getElementsByClassName("item-collection-photo");const total_count=item_collections.length;if(total_count===12){return}newPrototype=newPrototype.replace(/__photos__/g,index);item_collection_photo.innerHTML=newPrototype;item_collection_photo.querySelector("label").style.backgroundImage=`url('${reader.result}')`;const fileInput=item_collection_photo.querySelector('input[type="file"]');const dataTransfer=new DataTransfer;dataTransfer.items.add(file);fileInput.files=dataTransfer.files;item_collection_photo.querySelector(".del-item-photo").addEventListener("click",(function(){let $counter=$blockCollectionPhoto.getElementsByClassName("item-collection-photo").length;this.closest(".item-collection-photo").remove();let index=$addButtonPhoto.dataset.index*1;$addButtonPhoto.dataset.index=(index-1).toString()}));let images=photo_collection.querySelectorAll(".change-root");if(images.length===1){let photo_collection=document.getElementById("photo_collection");photo_collection.querySelectorAll(".change-root").forEach((function(rootChack,i,arr){rootChack.checked=true}))}item_collection_photo.querySelector(".change-root").addEventListener("change",(function(selector){let photo_collection=document.getElementById("photo_collection");photo_collection.querySelectorAll(".change-root").forEach((function(rootChack,i,arr){rootChack.checked=false}));this.checked=true}));$addButtonPhoto.dataset.index=(index+1).toString();$blockCollectionPhoto.appendChild(item_collection_photo)}}}