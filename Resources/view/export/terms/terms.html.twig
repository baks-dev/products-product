<?xml version="1.0"?>

<yml_catalog date='{{ 'now'|date('Y-m-d\\TH:00:00P') }}'>

    <shop>
        <name>{{ settings.title is defined ?: 'Company name' }}</name>
        <company>{{ settings.description is defined ?: 'Добро пожаловать' }}</company>
        <url>{{ absolute_url(path('core:public.homepage')) }}</url>
        <platform>Symfony</platform>
        <version>1.0</version>

        {# <agency>Технологичные решения</agency> #}
        {# <email>example-email@gmail.com</email> #}

        {# <delivery-options>
            <option cost='200' days='1'/>
        </delivery-options> #}
        {# <pickup-options>
            <option cost='200' days='1'/>
        </pickup-options> #}

        {# @var card \BaksDev\Products\Product\Repository\AllProductsByCategory\AllProductsByCategoryResult #}

        <offers>
            {% for card in products %}

                <offer id='{{ card.productId }}'>
                    <url>{{ absolute_url(path('products-product:public.detail', {
                            category: card.categoryUrl,
                            url: card.productUrl,
                            offer: card.offerValue,
                            variation: card.variationValue,
                            modification: card.modificationValue,
                        } )) }}</url>

                    {% set price = card.productPrice %}

                    {% if (price) %}
                        <price>{{ price }}</price>
                    {% else %}
                        <disabled>true</disabled>
                    {% endif %}

                    {# <oldprice>9990</oldprice> #}
                    {# <enable_auto_discounts>true</enable_auto_discounts> #}
                    <currencyId>{{ card.productCurrency|upper }}</currencyId>
                    {# <vat>VAT_20</vat> #}
                    {# <delivery>true</delivery> #}
                    {# <pickup>true</pickup> #}
                    {# <delivery-options>
                    <option cost='300' days='1' order-before='18'/>
                </delivery-options> #}
                    {# <pickup-options>
                    <option cost='300' days='1-3'/>
                </pickup-options> #}
                    <count>{{ card.productQuantity }}</count>
                </offer>
            {% endfor %}
        </offers>
    </shop>
</yml_catalog>